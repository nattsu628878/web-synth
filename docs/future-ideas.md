# 今後の新要素の候補

プロジェクトの現状（Sources / Effects / Modulators、ケーブル、保存・読み込み、マスター BPM）と memo.md を踏まえた、実装候補の整理。

---

## 1. 新モジュール

### 1.1 Sources（音源）

| 候補 | 説明 | 難易度 |
|------|------|--------|
| **Sub** | 1オクターブ下 / 2オクターブ下の sine または square。ベース・厚み用。 | 低 |
| **Pluck** | Karplus–Strong 系の pluck 音（サンプル不要）。ギター・キース風。 | 中 |
| **Dual Osc / Super Saw** | 2オシレーター＋デチューン＋ミックス。厚いリード向き。 | 中〜高 |
| **Chirp / Sweep** | 周波数が時間で変化する単発トーン。効果音・SFX 向き。 | 中 |

### 1.2 Effects（エフェクト）※ memo と一致

| 候補 | 説明 | 難易度 |
|------|------|--------|
| **Stereo Delay** | 左右別々のディレイ時間・フィードバック。空間・リズム用。 | 中 |
| **Chorus** | 短いディレイ＋LFO で揺らし。厚み・揺れ。 | 中 |
| **Flanger** | フィードバック付き短いディレイ＋LFO。 | 中 |
| **Phaser** | オールパス＋LFO。シンセ定番の「すり抜ける」音。 | 中 |
| **Distortion** | オーバードライブ／クラッシュ。ウェーブシェイパー or ソフトクリップ。 | 低〜中 |
| **Compressor** | ダイナミクス圧縮。音量のばらつきを抑える。 | 中 |
| **Exciter** | 高域ハーモニクス追加。聴感上の「明るさ」用。 | 中 |
| **Dimension** | ステレオ幅・空間感（短いディレイ＋位相など）。 | 中〜高 |
| **Rotating Speaker** | ドップラー＋トーン変化のシミュレーション。 | 高 |

※ EQ は既に EQ8 で実装済み。LPF/HPF もあり。

### 1.3 Modulators（モジュレータ）

| 候補 | 説明 | 難易度 |
|------|------|--------|
| **Sample & Hold** | 一定間隔でノイズをサンプルしてステップ状 CV を出力。ランダム・ノイズ系。 | 低 |
| **Random LFO** | ランダム波形の LFO（S&H に近いが滑らかにもできる）。 | 低 |
| **AD Envelope** | Attack–Decay のみ。パーカス・pluck 向き。 | 低 |
| **Multi LFO** | 複数波形を同時出力 or 位相ずらし。 | 中 |

---

## 2. UI / UX

### 2.1 memo に記載のもの

| 項目 | 内容 |
|------|------|
| **レベルメータをステレオに** | 現在のマスターメーターを L/R 別表示にする。 |
| **レベルメータの下に線** | メーター下に基準線や 0 dB ラインを表示。 |

### 2.2 その他

| 候補 | 説明 |
|------|------|
| **行の複製** | 1行まるごと（音源＋チェーン＋接続）を複製。 |
| **モジュールの複製** | 単一モジュールを同じ行 or 別行にコピー。 |
| **プリセット / テンプレート** | よく使う構成を名前付きで保存・呼び出し。 |
| **キーボードショートカット** | Undo / Redo、保存、BPM 変更など。 |
| **ツールチップ・ヘルプ** | パラメータ名やジャックの役割をホバーで表示。 |
| **ダーク/ライト以外のテーマ** | 追加カラーテーマやアクセシビリティ配慮。 |

---

## 3. ドキュメント・コード品質（memo / report より）

| 項目 | 内容 |
|------|------|
| **信号処理の解説 md** | 信号処理をしている部分を抽出し、解説用の md を作る（勉強用）。 |
| **未使用 API の整理** | report.md の「不要・未使用」に挙がった関数（`getSlotOrder`, `disconnectParam`, `getDestination`, `getSampleRate`, `getCurrentTime`, `createGain`）の削除 or 予約コメント。 |
| **PITCH_PARAM_IDS の利用** | ピッチ用ジャックの色分けを使うなら、該当 paramId を追加。使わないなら判定ロジックを整理。 |

---

## 4. 保存・プロジェクト

| 候補 | 説明 |
|------|------|
| **プロジェクト名** | 保存 JSON に名前を付け、読み込み時に表示。 |
| **保存形式のバージョン** | `version: 1` などを入れ、将来の互換性を考慮。 |
| **オートセーブ / 履歴** | ローカルストレージに定期的保存 or 履歴からの復元。 |

---

## 5. オーディオ周り

| 候補 | 説明 | 難易度 |
|------|------|--------|
| **WAV エクスポート** | マスター出力を MediaRecorder や OfflineAudioContext で録音し、ファイル保存。 | 中 |
| **MIDI 入力** | Web MIDI API でキーボード入力 → 音源の Freq / Gate にマッピング。 | 中〜高 |
| **オーディオ入力（マイク/ライン）** | 外部音声をソース or エフェクト経由で取り込む。 | 中 |

---

## 6. 優先度の目安（例）

- **すぐ効く**: Stereo Delay か Distortion、Sub、Sample & Hold、レベルメータのステレオ化。
- **memo と一致**: Stereo Delay, Chorus, Flanger, Phaser, Distortion, Compressor。
- **勉強・保守**: 信号処理解説 md、未使用 API 整理、PITCH_PARAM_IDS の決定。

必要に応じて「モジュール追加」「UI 改善」「ドキュメント」「保存形式」など、着手したい軸を決めてから個別に詳細を詰めると進めやすい。
